<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>vue问题记录 | 个人主页</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="金东的博客">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/0.styles.e24af840.css" as="style"><link rel="preload" href="/assets/js/app.e3910116.js" as="script"><link rel="preload" href="/assets/js/3.6ac95d42.js" as="script"><link rel="preload" href="/assets/js/1.f0ccedf0.js" as="script"><link rel="preload" href="/assets/js/30.3c1a3b5e.js" as="script"><link rel="prefetch" href="/assets/js/10.857389f5.js"><link rel="prefetch" href="/assets/js/11.26e7dc1f.js"><link rel="prefetch" href="/assets/js/12.fdffe87f.js"><link rel="prefetch" href="/assets/js/13.ff6e5555.js"><link rel="prefetch" href="/assets/js/14.8c8db96e.js"><link rel="prefetch" href="/assets/js/15.fb962a53.js"><link rel="prefetch" href="/assets/js/16.83c0b80a.js"><link rel="prefetch" href="/assets/js/17.3a5501bd.js"><link rel="prefetch" href="/assets/js/18.76b61d21.js"><link rel="prefetch" href="/assets/js/19.73baaacd.js"><link rel="prefetch" href="/assets/js/20.601f488e.js"><link rel="prefetch" href="/assets/js/21.f0268801.js"><link rel="prefetch" href="/assets/js/22.6b5b1805.js"><link rel="prefetch" href="/assets/js/23.9c42fba8.js"><link rel="prefetch" href="/assets/js/24.e5c536ef.js"><link rel="prefetch" href="/assets/js/25.1f7b60cf.js"><link rel="prefetch" href="/assets/js/26.188c587f.js"><link rel="prefetch" href="/assets/js/27.7837404f.js"><link rel="prefetch" href="/assets/js/28.a858e0a5.js"><link rel="prefetch" href="/assets/js/29.f5e76bdc.js"><link rel="prefetch" href="/assets/js/31.224dfa05.js"><link rel="prefetch" href="/assets/js/32.3cc9dfec.js"><link rel="prefetch" href="/assets/js/33.d46c30ab.js"><link rel="prefetch" href="/assets/js/34.56e59585.js"><link rel="prefetch" href="/assets/js/35.e6b74dfd.js"><link rel="prefetch" href="/assets/js/36.4af13073.js"><link rel="prefetch" href="/assets/js/37.bceababc.js"><link rel="prefetch" href="/assets/js/38.a59c27ea.js"><link rel="prefetch" href="/assets/js/39.f7b5b1f9.js"><link rel="prefetch" href="/assets/js/4.ab473061.js"><link rel="prefetch" href="/assets/js/40.9398e254.js"><link rel="prefetch" href="/assets/js/41.4fbc6279.js"><link rel="prefetch" href="/assets/js/5.c7966b41.js"><link rel="prefetch" href="/assets/js/6.fb372875.js"><link rel="prefetch" href="/assets/js/7.9ba6d69b.js"><link rel="prefetch" href="/assets/js/8.262266d9.js"><link rel="prefetch" href="/assets/js/9.9e8000aa.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e24af840.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-1156296a><div data-v-1156296a><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-1156296a data-v-1156296a><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-4e82dffc data-v-1156296a data-v-1156296a><h3 class="title" data-v-4e82dffc data-v-4e82dffc>个人主页</h3> <p class="description" data-v-4e82dffc data-v-4e82dffc>金东的博客</p> <label id="box" class="inputBox" data-v-4e82dffc data-v-4e82dffc><input type="password" value="" data-v-4e82dffc> <span data-v-4e82dffc>Konck! Knock!</span> <button data-v-4e82dffc>OK</button></label> <div class="footer" data-v-4e82dffc data-v-4e82dffc><span data-v-4e82dffc><i class="iconfont reco-theme" data-v-4e82dffc></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4e82dffc>vuePress-theme-reco</a></span> <span data-v-4e82dffc><i class="iconfont reco-copyright" data-v-4e82dffc></i> <a data-v-4e82dffc><span data-v-4e82dffc>xjd</span>
            
          <span data-v-4e82dffc>2019 - </span>
          2021
        </a></span></div></div> <div class="hide" data-v-1156296a><header class="navbar" data-v-1156296a><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/head.png" alt="个人主页" class="logo"> <span class="site-name">个人主页</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/tip/" class="nav-link"><i class="undefined"></i>
  tip
</a></li><li class="dropdown-item"><!----> <a href="/categories/note/" class="nav-link"><i class="undefined"></i>
  note
</a></li><li class="dropdown-item"><!----> <a href="/categories/interview/" class="nav-link"><i class="undefined"></i>
  interview
</a></li><li class="dropdown-item"><!----> <a href="/categories/学习/" class="nav-link"><i class="undefined"></i>
  学习
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-1156296a></div> <aside class="sidebar" data-v-1156296a><div class="personal-info-wrapper" data-v-828910c6 data-v-1156296a><img src="/avatar.png" alt="author-avatar" class="personal-img" data-v-828910c6> <h3 class="name" data-v-828910c6>
    xjd
  </h3> <div class="num" data-v-828910c6><div data-v-828910c6><h3 data-v-828910c6>31</h3> <h6 data-v-828910c6>Articles</h6></div> <div data-v-828910c6><h3 data-v-828910c6>11</h3> <h6 data-v-828910c6>Tags</h6></div></div> <ul class="social-links" data-v-828910c6></ul> <hr data-v-828910c6></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/tip/" class="nav-link"><i class="undefined"></i>
  tip
</a></li><li class="dropdown-item"><!----> <a href="/categories/note/" class="nav-link"><i class="undefined"></i>
  note
</a></li><li class="dropdown-item"><!----> <a href="/categories/interview/" class="nav-link"><i class="undefined"></i>
  interview
</a></li><li class="dropdown-item"><!----> <a href="/categories/学习/" class="nav-link"><i class="undefined"></i>
  学习
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div> <!----></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-4e82dffc data-v-1156296a><h3 class="title" data-v-4e82dffc data-v-4e82dffc>vue问题记录</h3> <!----> <label id="box" class="inputBox" data-v-4e82dffc data-v-4e82dffc><input type="password" value="" data-v-4e82dffc> <span data-v-4e82dffc>Konck! Knock!</span> <button data-v-4e82dffc>OK</button></label> <div class="footer" data-v-4e82dffc data-v-4e82dffc><span data-v-4e82dffc><i class="iconfont reco-theme" data-v-4e82dffc></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4e82dffc>vuePress-theme-reco</a></span> <span data-v-4e82dffc><i class="iconfont reco-copyright" data-v-4e82dffc></i> <a data-v-4e82dffc><span data-v-4e82dffc>xjd</span>
            
          <span data-v-4e82dffc>2019 - </span>
          2021
        </a></span></div></div> <div data-v-1156296a><main class="page"><section><div class="page-title"><h1 class="title">vue问题记录</h1> <div data-v-1ff7123e><i class="iconfont reco-account" data-v-1ff7123e><span data-v-1ff7123e>xjd</span></i> <i class="iconfont reco-date" data-v-1ff7123e><span data-v-1ff7123e>6/4/2019</span></i> <!----> <i class="tags iconfont reco-tag" data-v-1ff7123e><span class="tag-item" data-v-1ff7123e>vue</span></i></div></div> <div class="theme-reco-content content__default"><h2 id="vue-中引用背景图片"><a href="#vue-中引用背景图片" class="header-anchor">#</a> vue 中引用背景图片</h2> <p>在 Vue 项目开发中我们经常要向页面中添加背景图片，可是当我们在样式中添加了背景图片后，
编译打包后，配置到服务器上时，由于路径解析的问题，图片并不能够正确的显示出来，
如下 CSS 样式：background:url(&quot;../../assets/head.jpg&quot;);</p> <p>这个时候我们就要考虑使用其他的方式了，node 中提供了一种比较有效的方式来解决这个问题：</p> <h3 id="_1、在-data-中定义如下"><a href="#_1、在-data-中定义如下" class="header-anchor">#</a> 1、在 data 中定义如下：</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'productdetailspage'</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      note<span class="token operator">:</span> <span class="token punctuation">{</span>
        backgroundImage<span class="token operator">:</span> <span class="token string">&quot;url(&quot;</span> <span class="token operator">+</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;../../assets/save.png&quot;</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;)&quot;</span><span class="token punctuation">,</span>
        backgroundRepeat<span class="token operator">:</span> <span class="token string">&quot;no-repeat&quot;</span><span class="token punctuation">,</span>
        backgroundPosition<span class="token operator">:</span> <span class="token string">&quot;center center&quot;</span><span class="token punctuation">,</span>
        marginTop<span class="token operator">:</span> <span class="token string">&quot;5px&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h3 id="_2、通过行内样式将样式引入"><a href="#_2、通过行内样式将样式引入" class="header-anchor">#</a> 2、通过行内样式将样式引入</h3> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>note<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>note<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="vue-父组件修改子组件样式"><a href="#vue-父组件修改子组件样式" class="header-anchor">#</a> vue 父组件修改子组件样式</h2> <h3 id="_1、去掉-scoped"><a href="#_1、去掉-scoped" class="header-anchor">#</a> 1、去掉 scoped</h3> <p>在父组件的 <code>&lt;style&gt;</code> 中去掉 <code>scoped</code> 后，父组件中可以书写子组件的样式，但是你会担心这样会污染全局样式。
【因为我们知道正确使用全局样式的姿势是使用一个全局的 app.css】</p> <h3 id="_2、混用本地和全局样式"><a href="#_2、混用本地和全局样式" class="header-anchor">#</a> 2、混用本地和全局样式</h3> <p>你可以在一个组件中同时使用有作用域和无作用域的样式：</p> <div class="language-scss extra-class"><pre class="language-scss"><code>&lt;style&gt;
<span class="token comment">/* 全局样式 */</span>
&lt;/style&gt;
&lt;style scoped&gt;
<span class="token comment">/* 本地样式 */</span>
&lt;/style&gt;
</code></pre></div><h3 id="_3、使用深度作用选择器"><a href="#_3、使用深度作用选择器" class="header-anchor">#</a> 3、使用深度作用选择器</h3> <p>如果你希望 <code>scoped</code> 样式中的一个选择器能够作用得“更深”，例如影响子组件，你可以使用 <code>&gt;&gt;&gt;</code> 操作符：</p> <div class="language-scss extra-class"><pre class="language-scss"><code><span class="token selector">&lt;style scoped&gt;
.a &gt;&gt;&gt; .b </span><span class="token punctuation">{</span>
  <span class="token comment">/* ... */</span>
<span class="token punctuation">}</span>
&lt;/style&gt;
</code></pre></div><p>有些像 SASS 之类的预处理器无法正确解析 <code>&gt;&gt;&gt;</code>。这种情况下你可以用 <code>/deep/</code> 操作符取而代之 —— 这是一个 <code>&gt;&gt;&gt;</code> 的别名，同样可以正常工作。</p> <h2 id="computed-watch"><a href="#computed-watch" class="header-anchor">#</a> computed/watch</h2> <p>computed 是用于定义<strong>基于数据之上的数据</strong>。</p> <p>而 watch 是你想在<strong>某个数据变化时做一些事情</strong>，如果做的事情是更新其他数据，那其实与把这个要更新的数据项定义成 computed 是一样的，这个时候用 computed 更有可读性，虽然技术上讲 watch 也可以实现。</p> <p>但你也可以在被 watch 的数据变化时做其他事情啊，比如调用一个方法，这个是 computed 做不到也不应该做的。</p> <p>总结：</p> <ul><li>1.如果一个数据依赖于其他数据，那么把这个数据设计为 computed 的</li> <li>2.如果你需要在某个数据变化时做一些事情，使用 watch 来观察这个数据变化</li></ul> <p><strong>计算属性具有缓存</strong>。计算属性是基于它们的依赖进行缓存的。计算属性只有在它的相关依赖发生改变时才会重新求值。这就意味着只要 lastName 和 firstName 都没有发生改变，多次访问 fullName 计算属性会立即返回之前的计算结果，而不必再次执行函数。</p> <p>而侦听器 watch 是侦听一个特定的值，当该值变化时执行特定的函数。例如分页组件中，我们可以监听当前页码，当页码变化时执行对应的获取数据的函数。</p> <h2 id="引入-vuex"><a href="#引入-vuex" class="header-anchor">#</a> 引入 vuex</h2> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> vuex
<span class="token function">npm</span> <span class="token function">install</span> vuex-persistedstate
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> Vuex <span class="token keyword">from</span> <span class="token string">'vuex'</span>
<span class="token keyword">import</span> createPersistedState <span class="token keyword">from</span> <span class="token string">'vuex-persistedstate'</span>

Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>Vuex<span class="token punctuation">)</span>

<span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">const</span> mutations <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  state<span class="token punctuation">,</span>
  mutations<span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">createPersistedState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="引入-fastclick"><a href="#引入-fastclick" class="header-anchor">#</a> 引入 fastclick</h2> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> fastclick
</code></pre></div><p>在 main.js 里加上</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//引入fastclick</span>
<span class="token keyword">import</span> FastClick <span class="token keyword">from</span> <span class="token string">'fastclick'</span>
FastClick<span class="token punctuation">.</span><span class="token function">attach</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>body<span class="token punctuation">)</span>
</code></pre></div><h2 id="引入-vux-样式"><a href="#引入-vux-样式" class="header-anchor">#</a> 引入 vux 样式</h2> <h3 id="_1、安装"><a href="#_1、安装" class="header-anchor">#</a> 1、安装</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> vux --save
</code></pre></div><p>vux2 必须配合<code>vux-loader</code>使用, 请在<code>build/webpack.base.conf.js</code>里参照如下代码进行配置：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> vuxLoader <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'vux-loader'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> vuxLoader<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span>webpackConfig<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">'vux-ui'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">'duplicate-style'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">'less-theme'</span><span class="token punctuation">,</span>
      path<span class="token operator">:</span> <span class="token string">'src/styles/theme.less'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_2、手动配置"><a href="#_2、手动配置" class="header-anchor">#</a> 2、手动配置</h3> <ul><li>引入  <code>reset.less</code>，默认样式不包含 reset，并且部分用户自己有一套 reset 样式，因此需要在<code>App.vue</code>进行手动引入</li></ul> <div class="language-css extra-class"><pre class="language-css"><code>&lt;style lang=<span class="token string">&quot;less&quot;</span>&gt;
<span class="token atrule"><span class="token rule">@import</span> <span class="token string">'~vux/src/styles/reset.less'</span><span class="token punctuation">;</span></span>
&lt;/style&gt;
</code></pre></div><ul><li>配置  <code>vue-loader</code>（通过配置 vux-loader 实现)</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// vux-loader</span>
plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'vux-ui'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><ul><li>配置<code>babel-loader</code>以正确编译 VUX 的 js 源码（通过配置 vux-loader 实现）</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code>plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'vux-ui'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><ul><li>安装<code>less-loader</code>以正确编译 less 源码</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> <span class="token function">less</span> less-loader --save-dev
</code></pre></div><ul><li>安装  <code>yaml-loader</code>  以正确进行语言文件读取</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> yaml-loader --save-dev
</code></pre></div><ul><li>添加  <code>viewport</code> meta</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span>
  <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width,initial-scale=1,user-scalable=0<span class="token punctuation">&quot;</span></span>
<span class="token punctuation">/&gt;</span></span>
</code></pre></div><ul><li>添加 webpack plugin, 在构建后去除重复 css 代码（通过配置 vux-loader 实现）</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'duplicate-style'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><ul><li>如果你使用 <code>webpack-simple</code> 模板或者 webpack 配置里缺少 .vue extension 配置，请记得配置：</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>resolve<span class="token operator">:</span> <span class="token punctuation">{</span>
  extensions<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'.js'</span><span class="token punctuation">,</span> <span class="token string">'.vue'</span><span class="token punctuation">,</span> <span class="token string">'.json'</span><span class="token punctuation">]</span>
</code></pre></div><ul><li>node-sass 和 sass-loader</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.vue$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
  loader<span class="token operator">:</span> <span class="token string">'vue-loader'</span><span class="token punctuation">,</span>
  options<span class="token operator">:</span> <span class="token punctuation">{</span>
    loaders<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">'scss'</span><span class="token operator">:</span> <span class="token string">'style-loader!css-loader!sass-loader'</span>
      <span class="token comment">/* scss: ['vue-style-loader','css', 'sass'].join('!')*/</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h2 id="引入-axios"><a href="#引入-axios" class="header-anchor">#</a> 引入 axios</h2> <h2 id="vue-打包的文件部署到-express-服务器"><a href="#vue-打包的文件部署到-express-服务器" class="header-anchor">#</a> vue 打包的文件部署到 express 服务器</h2> <h3 id="_1、安装-express"><a href="#_1、安装-express" class="header-anchor">#</a> 1、安装 express</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> express body-parser  --save
</code></pre></div><h3 id="_2、在项目的根目录添加-app-js-作为启动-express-服务器的代码"><a href="#_2、在项目的根目录添加-app-js-作为启动-express-服务器的代码" class="header-anchor">#</a> 2、在项目的根目录添加 app.js 作为启动 express 服务器的代码</h3> <blockquote><p>执行：node app.js</p></blockquote> <p>打开浏览器访问 127.0.0.1:3000，出现“hello express” 者说明 express 部署成功</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'hello express!'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'app listening on port 3000.'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_3、对-vue-进行打包"><a href="#_3、对-vue-进行打包" class="header-anchor">#</a> 3、对 vue 进行打包</h3> <blockquote><p>执行：npm run build</p></blockquote> <p>打包后的文件存放于 dist 文件夹中，vue 经过 webpack 打包之后生成 dist 文件夹，里面有个 index.html，他是前端页面和服务端的对接页面。</p> <h3 id="_4、修改-app-js"><a href="#_4、修改-app-js" class="header-anchor">#</a> 4、修改 app.js</h3> <p>在 express 中加入 app.use(express.static(path.join(__dirname,'dist')))；app.js 代码如下：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'app listening on port 3000.'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_5、启动-express"><a href="#_5、启动-express" class="header-anchor">#</a> 5、启动 express</h3> <p>在启动 express 之前，需要修改 packge.json 里面的配置：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node build/dev-server.js&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;start&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node app.js&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;build&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node build/build.js&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;server&quot;</span><span class="token operator">:</span> <span class="token string">&quot;nodemon app.js&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h2 id="引入-eslint"><a href="#引入-eslint" class="header-anchor">#</a> 引入 eslint</h2> <h3 id="安装"><a href="#安装" class="header-anchor">#</a> 安装</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> eslint

<span class="token function">npm</span> i eslint eslint-config-standard eslint-plugin-standard eslint-plugin-promise eslint-plugin-import eslint-plugin-node -D
</code></pre></div><p>去项目的根目录里面手动创建一个.eslintrc 文件，然后在里面敲入以下代码</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;extends&quot;</span><span class="token operator">:</span> <span class="token string">&quot;standard&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>执行完以上步骤，我们就可以使用 ESLint 这个工具来校验项目里的代码。</p> <p>在 Vue 项目里，.vue 文件写的是类似于 html 的格式，不是标准的 JavaScript 文件，ESLint 无法直接识别.vue 文件里的 JavaScript 代码，那么这个时候我们需要去安装一个工具</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> i eslint-plugin-html -D
</code></pre></div><p>因为在 vue 文件里面写 JavaScript 代码也是写在 script 标签里面的，这个插件的作用就是识别一个文件里面 script 标签里面的 JS 代码，官方也是这么推荐的。所以我们要在.eslintrc 文件里面新增这么一段：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;extends&quot;</span><span class="token operator">:</span> <span class="token string">&quot;standard&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;plugins&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;html&quot;</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>执行完以上步骤后，我们跳转到 package.json 文件里面的 scripts 里面新增一条命令：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">&quot;lint&quot;</span><span class="token operator">:</span> <span class="token string">&quot;eslint --ext .js --ext .jsx --ext .vue src/&quot;</span>
</code></pre></div><p>--ext 后面需要写上指定检测文件的后缀，如.js、.jsx、 .vue 等，紧接着后面要写上一个参数，这个参数就是我们要检测哪个目录下面的文件，一般项目文件都在 src 下面，所以在后面写上 src/就好。</p> <p>运行 npm run lint,来检验项目里的代码是否符合 ESLint 的规则。</p> <h3 id="如何让-eslint-自动修复报错-提高开发效率"><a href="#如何让-eslint-自动修复报错-提高开发效率" class="header-anchor">#</a> 如何让 ESLint 自动修复报错，提高开发效率</h3> <p>在 package.json 文件里面的 scripts 里面新增一条命令：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">&quot;lint-fix&quot;</span><span class="token operator">:</span> <span class="token string">&quot;eslint --fix --ext .js --ext .jsx --ext .vue src/&quot;</span>
</code></pre></div><p>只需要在 ESLint 后面加上一个参数--fix，它就会自动修复 Lint 出来的问题。当我们再去 terminal 里面跑一下：npm run lint-fix</p> <h3 id="怎么在项目中预处理错误-eslint-loader-来帮忙"><a href="#怎么在项目中预处理错误-eslint-loader-来帮忙" class="header-anchor">#</a> 怎么在项目中预处理错误，eslint-loader 来帮忙</h3> <p>我希望在项目开发的过程当中，每次修改代码，它都能够自动进行 ESLint 的检查。因为在我们改代码的过程中去做一次检查，如果有错误，我们就能够很快地去定位到这个问题，由于是我们刚刚改过的，因此立马把它修复掉就 OK 了。</p> <p>这就避免了我们每次改了一大堆代码之后，要去提交的时候，再去跑一次 ESLint，有可能有很多地方要去改，浪费我们的时间，因为你一下子就定位不到这个问题在哪里了。同时我们每次改代码的时候去检测，也能改善我们写代码的规范性，让我们慢慢养成规范写代码的习惯。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> i eslint-loader babel-eslint -D
</code></pre></div><p>执行完上述操作后，我们需要跳转到.eslintrc 文件里面配置一下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;extends&quot;</span><span class="token operator">:</span> <span class="token string">&quot;standard&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;plugins&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;html&quot;</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">&quot;parser&quot;</span><span class="token operator">:</span> <span class="token string">&quot;babel-eslint&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>为什么我们要配置 parser 呢？因为我们的项目是基于 webpack 的，项目里的代码都是需要经过 babel 去处理的。babel 处理的这种语法可能对 ESLint 不是特别的支持，然后我们使用 loader 处理 ESLint 的时候就会出现一些问题。所以一般来说，我们用 webpack 和 babel 来进行开发的项目，都会指定它的 parser 使用 babel-eslint。</p> <p>执行完以上步骤之后，在 build 目录下找到我前几篇文章里讲到的 webpack.config.base.js，然后在 module 下面的 rules 里面添加一个对象：</p> <div class="language-js extra-class"><pre class="language-js"><code>rules<span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(vue|js|jsx)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
    loader<span class="token operator">:</span> <span class="token string">'eslint-loader'</span><span class="token punctuation">,</span>
    exclude<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
    enforce<span class="token operator">:</span> <span class="token string">'pre'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token operator">...</span><span class="token operator">...</span>
<span class="token punctuation">]</span>
</code></pre></div><p>因为.vue 文件已经被 vue-loader 处理过了，而 eslint-loader 只是做代码检测，肯定不能让它去默认处理.vue 文件。所以我们希望 vue-loader 在处理.vue 文件之前，让 eslint-loader 先进行一次代码检测。如果代码检测都通过不了的话，那么 vue-loader 就不需要处理了，直接报错就 OK 了。所以需要加上 enforece: 'pre'，这叫预处理。</p> <h2 id="vue-中-json-导出-excel"><a href="#vue-中-json-导出-excel" class="header-anchor">#</a> vue 中 json 导出 Excel</h2> <h3 id="_1、依赖"><a href="#_1、依赖" class="header-anchor">#</a> 1、依赖</h3> <p>xlsx：这是一个功能强大的 excel 处理库，但是上手难度也很大，还涉及不少二进制的东西</p> <p>file-saver:ES5 新增了相关 file,blob,fileList 等 API，但不是所有浏览器都支持，file-saver 在没有原生支持 saveAs 的浏览器上实现了 saveAs()接口</p> <p>script-loader: 在全局上下文环境中执行一次 js 脚本。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> -D xlsx file-saver
<span class="token function">npm</span> <span class="token function">install</span> -s script-loader
</code></pre></div><h3 id="_2、引入-blob-js-export2excel-js"><a href="#_2、引入-blob-js-export2excel-js" class="header-anchor">#</a> 2、引入 Blob.js/Export2Excel.js</h3> <p>在 src 下新建 vendor 文件夹放入以上两个文件</p> <h3 id="_3、调用"><a href="#_3、调用" class="header-anchor">#</a> 3、调用</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">handleDownload</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  require<span class="token punctuation">.</span><span class="token function">ensure</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">// 用 webpack Code Splitting xlsl还是很大的</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> export_json_to_excel <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'vendor/Export2Excel'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> tHeader <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'序号'</span><span class="token punctuation">,</span> <span class="token string">'文章标题'</span><span class="token punctuation">,</span> <span class="token string">'作者'</span><span class="token punctuation">,</span> <span class="token string">'阅读数'</span><span class="token punctuation">,</span> <span class="token string">'发布时间'</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// excel 表格头</span>
    <span class="token keyword">const</span> filterVal <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'id'</span><span class="token punctuation">,</span> <span class="token string">'title'</span><span class="token punctuation">,</span> <span class="token string">'author'</span><span class="token punctuation">,</span> <span class="token string">'pageviews'</span><span class="token punctuation">,</span> <span class="token string">'display_time'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> list <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>list<span class="token punctuation">;</span>
    <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">formatJson</span><span class="token punctuation">(</span>filterVal<span class="token punctuation">,</span> list<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 自行洗数据 按序排序的一个array数组</span>
    <span class="token function">export_json_to_excel</span><span class="token punctuation">(</span>tHeader<span class="token punctuation">,</span> data<span class="token punctuation">,</span> <span class="token string">'列表excel'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>，
<span class="token function">formatJson</span><span class="token punctuation">(</span><span class="token parameter">filterVal<span class="token punctuation">,</span> jsonData</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> jsonData<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">v</span> <span class="token operator">=&gt;</span> filterVal<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">j</span> <span class="token operator">=&gt;</span> v<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_4、csv-导出"><a href="#_4、csv-导出" class="header-anchor">#</a> 4、csv 导出</h3> <p>如果系统不强制要求 excel 格式的话，使用 csv 导出方便太多了,创建一个 a 标签，写上 data:text/csv;charset=utf-8,把数据塞进去，encodeURI(csvContent)就可以了</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>a ref<span class="token operator">=</span><span class="token string">&quot;link&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;download-btn&quot;</span> v<span class="token operator">-</span>on<span class="token operator">:</span>click<span class="token operator">=</span><span class="token string">&quot;handleClick&quot;</span><span class="token operator">&gt;</span>导出<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/javascript&quot;</span><span class="token operator">&gt;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  props<span class="token operator">:</span> <span class="token punctuation">{</span>
    header<span class="token operator">:</span> <span class="token punctuation">{</span>
      type<span class="token operator">:</span> Array<span class="token punctuation">,</span>
      <span class="token function-variable function">default</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    data<span class="token operator">:</span> <span class="token punctuation">{</span>
      type<span class="token operator">:</span> Array<span class="token punctuation">,</span>
      <span class="token function-variable function">default</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    fileName<span class="token operator">:</span> <span class="token punctuation">{</span>
      type<span class="token operator">:</span> String<span class="token punctuation">,</span>
      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">'data.csv'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">handleClick</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">||</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>length <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$message</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          message<span class="token operator">:</span> <span class="token string">'请先进行查询,并等待查询结果返回!'</span><span class="token punctuation">,</span>
          type<span class="token operator">:</span> <span class="token string">'error'</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">var</span> csvContent <span class="token operator">=</span> <span class="token string">'data:text/csv;charset=utf-8,\ufeff'</span><span class="token punctuation">;</span>
      csvContent <span class="token operator">+=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>headerLabel <span class="token operator">+</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> dataString <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>headerProp<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          dataString <span class="token operator">+=</span> item<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>headerProp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">','</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        csvContent <span class="token operator">+=</span> index <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>length <span class="token operator">?</span> dataString<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">,$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token string">'\n'</span><span class="token punctuation">)</span> <span class="token operator">:</span> dataString<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">,$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>link<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'href'</span><span class="token punctuation">,</span> <span class="token function">encodeURI</span><span class="token punctuation">(</span>csvContent<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>link<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'download'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  computed<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 要求head是数组，数组中的每个元素是对象，并且每个对象都有label属性</span>
    <span class="token function-variable function">headerLabel</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> result<span class="token punctuation">;</span>
      result <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>header<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> item<span class="token punctuation">.</span>label<span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      result <span class="token operator">=</span> result<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">headerProp</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> result<span class="token punctuation">;</span>
      result <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>header<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> item<span class="token punctuation">.</span>prop<span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>style lang<span class="token operator">=</span><span class="token string">&quot;scss&quot;</span> scoped<span class="token operator">&gt;</span>
<span class="token punctuation">.</span>download<span class="token operator">-</span>btn <span class="token punctuation">{</span>
  display<span class="token operator">:</span> inline<span class="token operator">-</span>block<span class="token punctuation">;</span>
  margin<span class="token operator">-</span>left<span class="token operator">:</span> <span class="token number">10</span>px<span class="token punctuation">;</span>
  padding<span class="token operator">:</span> <span class="token number">2</span>px <span class="token number">15</span>px<span class="token punctuation">;</span>
  font<span class="token operator">-</span>size<span class="token operator">:</span> <span class="token number">12</span>px<span class="token punctuation">;</span>
  border<span class="token operator">-</span>radius<span class="token operator">:</span> <span class="token number">4</span>px<span class="token punctuation">;</span>
  color<span class="token operator">:</span> #<span class="token constant">FFF</span><span class="token punctuation">;</span>
  background<span class="token operator">-</span>color<span class="token operator">:</span> #f7ba2a<span class="token punctuation">;</span>
  border<span class="token operator">-</span>color<span class="token operator">:</span> #f7ba2a<span class="token punctuation">;</span>
  outline<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
  text<span class="token operator">-</span>align<span class="token operator">:</span> center<span class="token punctuation">;</span>
  <span class="token operator">-</span>webkit<span class="token operator">-</span>appearence<span class="token operator">:</span> none<span class="token punctuation">;</span>
  appearence<span class="token operator">:</span> none<span class="token punctuation">;</span>
  cursor<span class="token operator">:</span> pointer<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>
</code></pre></div><h2 id="vue-中使用-fullpage"><a href="#vue-中使用-fullpage" class="header-anchor">#</a> vue 中使用 fullpage</h2> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> --save vue-fullpage.js
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> <span class="token string">'fullpage.js/vendors/scrolloverflow'</span> <span class="token comment">// Optional. When using scrollOverflow:true</span>
<span class="token keyword">import</span> <span class="token string">'./fullpage.scrollHorizontally.min'</span> <span class="token comment">// Optional. When using fullpage extensions</span>
<span class="token keyword">import</span> VueFullPage <span class="token keyword">from</span> <span class="token string">'vue-fullpage.js'</span>

Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>VueFullPage<span class="token punctuation">)</span>

<span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  el<span class="token operator">:</span> <span class="token string">'#app'</span><span class="token punctuation">,</span>
  <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token parameter">h</span> <span class="token operator">=&gt;</span> <span class="token function">h</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></div></section> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">4/15/2020, 2:26:45 PM</span></div></footer> <!----> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:12rem;" data-v-70334359><li class="level-2" data-v-70334359><a href="/javascript/vue/#vue-中引用背景图片" class="sidebar-link reco-side-vue-中引用背景图片" data-v-70334359>vue 中引用背景图片</a></li><li class="level-3" data-v-70334359><a href="/javascript/vue/#_1、在-data-中定义如下" class="sidebar-link reco-side-_1、在-data-中定义如下" data-v-70334359>1、在 data 中定义如下：</a></li><li class="level-3" data-v-70334359><a href="/javascript/vue/#_2、通过行内样式将样式引入" class="sidebar-link reco-side-_2、通过行内样式将样式引入" data-v-70334359>2、通过行内样式将样式引入</a></li><li class="level-2" data-v-70334359><a href="/javascript/vue/#vue-父组件修改子组件样式" class="sidebar-link reco-side-vue-父组件修改子组件样式" data-v-70334359>vue 父组件修改子组件样式</a></li><li class="level-3" data-v-70334359><a href="/javascript/vue/#_1、去掉-scoped" class="sidebar-link reco-side-_1、去掉-scoped" data-v-70334359>1、去掉 scoped</a></li><li class="level-3" data-v-70334359><a href="/javascript/vue/#_2、混用本地和全局样式" class="sidebar-link reco-side-_2、混用本地和全局样式" data-v-70334359>2、混用本地和全局样式</a></li><li class="level-3" data-v-70334359><a href="/javascript/vue/#_3、使用深度作用选择器" class="sidebar-link reco-side-_3、使用深度作用选择器" data-v-70334359>3、使用深度作用选择器</a></li><li class="level-2" data-v-70334359><a href="/javascript/vue/#computed-watch" class="sidebar-link reco-side-computed-watch" data-v-70334359>computed/watch</a></li><li class="level-2" data-v-70334359><a href="/javascript/vue/#引入-vuex" class="sidebar-link reco-side-引入-vuex" data-v-70334359>引入 vuex</a></li><li class="level-2" data-v-70334359><a href="/javascript/vue/#引入-fastclick" class="sidebar-link reco-side-引入-fastclick" data-v-70334359>引入 fastclick</a></li><li class="level-2" data-v-70334359><a href="/javascript/vue/#引入-vux-样式" class="sidebar-link reco-side-引入-vux-样式" data-v-70334359>引入 vux 样式</a></li><li class="level-3" data-v-70334359><a href="/javascript/vue/#_1、安装" class="sidebar-link reco-side-_1、安装" data-v-70334359>1、安装</a></li><li class="level-3" data-v-70334359><a href="/javascript/vue/#_2、手动配置" class="sidebar-link reco-side-_2、手动配置" data-v-70334359>2、手动配置</a></li><li class="level-2" data-v-70334359><a href="/javascript/vue/#引入-axios" class="sidebar-link reco-side-引入-axios" data-v-70334359>引入 axios</a></li><li class="level-2" data-v-70334359><a href="/javascript/vue/#vue-打包的文件部署到-express-服务器" class="sidebar-link reco-side-vue-打包的文件部署到-express-服务器" data-v-70334359>vue 打包的文件部署到 express 服务器</a></li><li class="level-3" data-v-70334359><a href="/javascript/vue/#_1、安装-express" class="sidebar-link reco-side-_1、安装-express" data-v-70334359>1、安装 express</a></li><li class="level-3" data-v-70334359><a href="/javascript/vue/#_2、在项目的根目录添加-app-js-作为启动-express-服务器的代码" class="sidebar-link reco-side-_2、在项目的根目录添加-app-js-作为启动-express-服务器的代码" data-v-70334359>2、在项目的根目录添加 app.js 作为启动 express 服务器的代码</a></li><li class="level-3" data-v-70334359><a href="/javascript/vue/#_3、对-vue-进行打包" class="sidebar-link reco-side-_3、对-vue-进行打包" data-v-70334359>3、对 vue 进行打包</a></li><li class="level-3" data-v-70334359><a href="/javascript/vue/#_4、修改-app-js" class="sidebar-link reco-side-_4、修改-app-js" data-v-70334359>4、修改 app.js</a></li><li class="level-3" data-v-70334359><a href="/javascript/vue/#_5、启动-express" class="sidebar-link reco-side-_5、启动-express" data-v-70334359>5、启动 express</a></li><li class="level-2" data-v-70334359><a href="/javascript/vue/#引入-eslint" class="sidebar-link reco-side-引入-eslint" data-v-70334359>引入 eslint</a></li><li class="level-3" data-v-70334359><a href="/javascript/vue/#安装" class="sidebar-link reco-side-安装" data-v-70334359>安装</a></li><li class="level-3" data-v-70334359><a href="/javascript/vue/#如何让-eslint-自动修复报错-提高开发效率" class="sidebar-link reco-side-如何让-eslint-自动修复报错-提高开发效率" data-v-70334359>如何让 ESLint 自动修复报错，提高开发效率</a></li><li class="level-3" data-v-70334359><a href="/javascript/vue/#怎么在项目中预处理错误-eslint-loader-来帮忙" class="sidebar-link reco-side-怎么在项目中预处理错误-eslint-loader-来帮忙" data-v-70334359>怎么在项目中预处理错误，eslint-loader 来帮忙</a></li><li class="level-2" data-v-70334359><a href="/javascript/vue/#vue-中-json-导出-excel" class="sidebar-link reco-side-vue-中-json-导出-excel" data-v-70334359>vue 中 json 导出 Excel</a></li><li class="level-3" data-v-70334359><a href="/javascript/vue/#_1、依赖" class="sidebar-link reco-side-_1、依赖" data-v-70334359>1、依赖</a></li><li class="level-3" data-v-70334359><a href="/javascript/vue/#_2、引入-blob-js-export2excel-js" class="sidebar-link reco-side-_2、引入-blob-js-export2excel-js" data-v-70334359>2、引入 Blob.js/Export2Excel.js</a></li><li class="level-3" data-v-70334359><a href="/javascript/vue/#_3、调用" class="sidebar-link reco-side-_3、调用" data-v-70334359>3、调用</a></li><li class="level-3" data-v-70334359><a href="/javascript/vue/#_4、csv-导出" class="sidebar-link reco-side-_4、csv-导出" data-v-70334359>4、csv 导出</a></li><li class="level-2" data-v-70334359><a href="/javascript/vue/#vue-中使用-fullpage" class="sidebar-link reco-side-vue-中使用-fullpage" data-v-70334359>vue 中使用 fullpage</a></li></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/assets/js/app.e3910116.js" defer></script><script src="/assets/js/3.6ac95d42.js" defer></script><script src="/assets/js/1.f0ccedf0.js" defer></script><script src="/assets/js/30.3c1a3b5e.js" defer></script>
  </body>
</html>
